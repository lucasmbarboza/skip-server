# /etc/stunnel/stunnel.conf
# Configuração SKIP Server - RFC SKIP compliant (OpenSSL 3.x compatible)

# Configurações globais obrigatórias
pid = /var/run/stunnel4/stunnel.pid
output = /var/log/stunnel4/stunnel.log
debug = 4

# Configurações de segurança
fips = no
engine = auto

# Configurações TLS - permitir apenas TLS 1.2 conforme RFC SKIP
options = NO_SSLv2
options = NO_SSLv3
options = NO_TLSv1
options = NO_TLSv1_1

[skip-psk-server]
# SKIP Server com TLS PSK (Recommended - RFC SKIP Table 1)
accept = 8443
connect = 127.0.0.1:8080

# Configurações TLS PSK compatíveis com OpenSSL 3.x
# Usando ciphers PSK que funcionam com OpenSSL 3.x
ciphers = PSK-AES256-GCM-SHA384:PSK-AES128-GCM-SHA256:DHE-PSK-AES256-GCM-SHA384:DHE-PSK-AES128-GCM-SHA256:PSK-AES256-CBC-SHA384:PSK-AES128-CBC-SHA256
PSKsecrets = /etc/stunnel/psk.txt

# Configurações de timeout
TIMEOUTclose = 0
TIMEOUTconnect = 10
TIMEOUTidle = 43200